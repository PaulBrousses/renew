// Messages riches avec faits scientifiques et bénéfices détaillés
export const richMessages = {
  // Messages spéciaux pour les étapes clés
  milestones: {
    1: {
      alcohol: {
        title: "Premier jour accompli ! 🌅",
        message: "Ton taux de sucre dans le sang commence déjà à se normaliser. Dans 12h, ton corps éliminera complètement l'alcool.",
        fact: "💡 Le saviez-vous ? Après 24h, les risques de crise cardiaque diminuent déjà."
      },
      cigarette: {
        title: "24h sans fumée ! 🚭", 
        message: "Ton monoxyde de carbone sanguin est revenu à la normale. Tes poumons commencent à évacuer le mucus et les résidus.",
        fact: "💡 En 20 minutes seulement, ton rythme cardiaque et ta tension artérielle baissent."
      },
      both: {
        title: "Double victoire ! 🎯",
        message: "Ton corps entame une détox complète. Circulation sanguine améliorée, oxygénation optimisée.",
        fact: "💡 Tu viens de faire le choix le plus important pour ta santé future."
      }
    },
    3: {
      alcohol: {
        title: "72h de liberté ! ⚡",
        message: "Ton foie commence sa régénération. Les enzymes hépatiques se normalisent. Tu dors probablement mieux.",
        fact: "💡 Le foie peut se régénérer jusqu'à 75% de sa masse en quelques semaines."
      },
      cigarette: {
        title: "3 jours smoke-free ! 🌬️",
        message: "Toute la nicotine a quitté ton corps. Tes bronches se détendent, tu respires plus facilement.",
        fact: "💡 Tes papilles gustatives et ton odorat commencent à se régénérer."
      },
      both: {
        title: "Le cap critique ! 🔥",
        message: "Les symptômes de sevrage physique atteignent leur pic puis diminuent. Le plus dur est derrière toi.",
        fact: "💡 Statistiquement, passer les 3 premiers jours multiplie tes chances de réussite par 5."
      }
    },
    7: {
      alcohol: {
        title: "Une semaine de sobriété ! 🎉",
        message: "Ton sommeil REM s'améliore drastiquement. Ton système immunitaire se renforce. Tu économises déjà 84€ en moyenne.",
        fact: "💡 Une semaine sans alcool améliore la qualité du sommeil de 40%."
      },
      cigarette: {
        title: "7 jours sans cigarette ! 🏆",
        message: "Tes poumons évacuent activement les toxines. Ton goût et ton odorat sont 2x plus sensibles qu'avant.",
        fact: "💡 En une semaine, tu as économisé environ 50€ et évité 140 cigarettes."
      },
      both: {
        title: "Champion de la semaine ! 👑",
        message: "Ton corps élimine massivement les toxines. Énergie, concentration et humeur s'améliorent nettement.",
        fact: "💡 Seulement 15% des gens atteignent une semaine. Tu fais partie de l'élite !"
      }
    },
    14: {
      alcohol: {
        title: "Deux semaines de clarté ! 🧠",
        message: "Ton cerveau produit à nouveau naturellement de la dopamine. Anxiété et dépression diminuent significativement.",
        fact: "💡 Après 2 semaines, les fonctions cognitives s'améliorent de 25%."
      },
      cigarette: {
        title: "14 jours de respiration ! 💨",
        message: "Ta circulation sanguine s'améliore drastiquement. Tes poumons fonctionnent 30% mieux qu'au jour 1.",
        fact: "💡 Tes risques d'infarctus ont déjà diminué de 50%."
      },
      both: {
        title: "Transformation visible ! ✨",
        message: "Ta peau retrouve son éclat, tes yeux sont plus clairs. Ton entourage remarque le changement.",
        fact: "💡 Deux semaines marquent souvent le tournant psychologique décisif."
      }
    },
    30: {
      alcohol: {
        title: "UN MOIS COMPLET ! 🏆",
        message: "Ton foie a éliminé la graisse accumulée. Ta tension artérielle est optimale. Tu as économisé plus de 360€.",
        fact: "💡 Un mois sans alcool réduit les risques de cancer du foie de 15%."
      },
      cigarette: {
        title: "30 jours smoke-free ! 🌟",
        message: "Tes poumons ont évacué la majorité des goudrons. Ta capacité pulmonaire a augmenté de 10%.",
        fact: "💡 En un mois, tu as évité 600 cigarettes et 12mg de goudron."
      },
      both: {
        title: "Légende du mois ! 👑",
        message: "Ton système cardiovasculaire fonctionne comme une machine neuve. Endurance et vitalité au top.",
        fact: "💡 Moins de 5% des gens atteignent un mois complet. Tu es exceptionnel !"
      }
    },
    90: {
      alcohol: {
        title: "3 MOIS DE LIBERTÉ ! 🚀",
        message: "Ton cerveau a recâblé ses circuits de récompense. L'envie d'alcool appartient au passé.",
        fact: "💡 Après 3 mois, les risques de rechute chutent de 80%."
      },
      cigarette: {
        title: "90 jours sans fumée ! 🌈",
        message: "Tes poumons ont retrouvé 50% de leur capacité d'origine. Ton souffle est celui d'un non-fumeur.",
        fact: "💡 3 mois sans cigarette équivaut à gagner 1 mois d'espérance de vie."
      },
      both: {
        title: "Maître de la sobriété ! 🎯",
        message: "Tu as officiellement cassé toutes tes habitudes destructrices. C'est un nouveau mode de vie.",
        fact: "💡 Tu fais partie des 2% qui atteignent 90 jours. Respect total !"
      }
    }
  },

  // Messages quotidiens variés avec rotation
  daily: {
    alcohol: [
      {
        message: "Chaque verre non bu, c'est 150 calories économisées et ton foie qui te dit merci.",
        tip: "💡 Astuce : Remplace par de l'eau pétillante avec du citron, même plaisir sans les dégâts."
      },
      {
        message: "L'alcool perturbe 5 phases du sommeil. Sans lui, tu récupères 40% mieux.",
        tip: "💡 Le saviez-vous ? L'alcool empêche le sommeil REM, crucial pour la mémoire."
      },
      {
        message: "Ton système immunitaire se renforce chaque jour sans alcool. Moins de rhumes cette année !",
        tip: "💡 L'alcool affaiblit les globules blancs pendant 24h après consommation."
      },
      {
        message: "Sans alcool, ton cerveau produit naturellement plus de sérotonine. Humeur au beau fixe !",
        tip: "💡 L'alcool épuise la sérotonine, d'où la déprime du lendemain."
      },
      {
        message: "Chaque jour sobre, c'est 12€ économisés en moyenne. Calcule tes économies !",
        tip: "💡 Un français dépense en moyenne 4380€/an en alcool."
      }
    ],
    cigarette: [
      {
        message: "Chaque cigarette non fumée, ce sont 11 minutes de vie gagnées. Fais le calcul !",
        tip: "💡 Une cigarette contient plus de 4000 substances chimiques, dont 70 cancérigènes."
      },
      {
        message: "Tes poumons éliminent 1500 particules toxiques par jour depuis que tu as arrêté.",
        tip: "💡 Les cils vibratiles de tes bronches repoussent en 2-3 semaines."
      },
      {
        message: "Ta peau produit 30% plus de collagène sans nicotine. Anti-âge naturel !",
        tip: "💡 Fumer réduit l'oxygénation de la peau de 40%."
      },
      {
        message: "Ton goût s'affine chaque jour. Redécouvre les vraies saveurs de la vie !",
        tip: "💡 La nicotine détruit 2/3 des papilles gustatives."
      },
      {
        message: "Sans cigarette, ton rythme cardiaque au repos baisse de 10-15 battements/min.",
        tip: "💡 Chaque cigarette accélère le cœur pendant 20 minutes."
      }
    ],
    both: [
      {
        message: "Double détox en cours ! Ton corps élimine simultanément nicotine et éthanol. Puissant !",
        tip: "💡 Arrêter les deux ensemble multiplie les bénéfices santé par 3."
      },
      {
        message: "Ton système cardiovasculaire fonctionne comme neuf. Circulation optimale !",
        tip: "💡 Alcool + tabac = risque cardiaque multiplié par 8."
      },
      {
        message: "Tu économises environ 20€/jour. De quoi te faire un super cadeau bientôt !",
        tip: "💡 En un an, c'est plus de 7000€ d'économies potentielles."
      }
    ]
  },

  // Messages de rechute bienveillants
  relapse: {
    alcohol: {
      message: "Une rechute n'efface pas tes progrès. Ton foie garde sa mémoire de régénération.",
      encouragement: "Chaque tentative t'apprend quelque chose. Prêt pour le round suivant ?"
    },
    cigarette: {
      message: "Tu as fumé ? Tes poumons pardonnent vite. Ils recommencent à guérir dès maintenant.",
      encouragement: "Les champions tombent 7 fois, se relèvent 8. C'est ton tour !"
    },
    both: {
      message: "Rechute partielle ou totale, peu importe. L'important c'est de se relever.",
      encouragement: "Chaque jour sobre compte, même s'il y a des pauses. Continue !"
    }
  }
};

// Messages motivationnels pour les jours 'normaux'
export const motivationalMessages = [
  {
    message: "Ton futur toi de 80 ans te regarde et te dit merci pour chaque jour sobre.",
    category: "perspective"
  },
  {
    message: "Chaque 'non' que tu dis renforce ton muscle de la volonté. Tu deviens plus fort.",
    category: "mental"
  },
  {
    message: "La sobriété n'est pas une privation, c'est un super-pouvoir que tu développes.",
    category: "mindset"
  },
  {
    message: "Tes proches sont fiers de toi, même s'ils ne le disent pas toujours.",
    category: "social"
  },
  {
    message: "Tu construis une nouvelle identité, brick by brick. Sois patient avec toi-même.",
    category: "identity"
  }
];

// Fonction pour obtenir un message riche selon le jour et le contexte
export const getRichMessageForDay = (day, status, addictions, firstName = 'Paul') => {
  if (status === 'relapse') {
    const addictionKey = addictions.length === 1 ? addictions[0] : 'both';
    const relapseMsg = richMessages.relapse[addictionKey];
    return {
      title: "Pas de panique 💙",
      message: relapseMsg.message,
      tip: relapseMsg.encouragement
    };
  }

  // Messages pour les étapes clés
  const milestones = [1, 3, 7, 14, 30, 90];
  const milestone = milestones.find(m => day === m);
  
  if (milestone) {
    const addictionKey = addictions.length === 1 ? addictions[0] : 'both';
    const milestoneMsg = richMessages.milestones[milestone][addictionKey];
    return {
      title: milestoneMsg.title,
      message: `${firstName}, ${milestoneMsg.message}`,
      tip: milestoneMsg.fact
    };
  }

  // Messages quotidiens variés
  const addictionKey = addictions.length === 1 ? addictions[0] : 'both';
  const dailyMessages = richMessages.daily[addictionKey];
  const randomDaily = dailyMessages[day % dailyMessages.length];
  
  return {
    title: `Jour ${day} - Continue ! 🌟`,
    message: `${firstName}, ${randomDaily.message}`,
    tip: randomDaily.tip
  };
};

// Fonction de compatibilité (ancienne API)
export const getMessageForDay = (day, status, addictions) => {
  const richMsg = getRichMessageForDay(day, status, addictions);
  return `${richMsg.title} ${richMsg.message}`;
};
