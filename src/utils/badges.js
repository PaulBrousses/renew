export const alcoholBadges = [
  // Premiers pas
  { id: 'alcohol_first_day', name: 'Premier jour', icon: 'ğŸŒ±', days: 1, color: 'bg-emerald-100 text-emerald-800', description: 'Le premier pas vers la libertÃ©' },
  { id: 'alcohol_3_days', name: 'DÃ©tox', icon: 'ğŸ’§', days: 3, color: 'bg-blue-100 text-blue-800', description: 'Ton corps commence Ã  se purifier' },
  { id: 'alcohol_week_1', name: 'PremiÃ¨re semaine', icon: 'ğŸŒ¿', days: 7, color: 'bg-green-100 text-green-800', description: 'Une semaine de clartÃ© mentale' },
  { id: 'alcohol_2_weeks', name: 'Sommeil rÃ©parateur', icon: 'ğŸ˜´', days: 14, color: 'bg-indigo-100 text-indigo-800', description: 'Ton sommeil s\'amÃ©liore' },
  { id: 'alcohol_3_weeks', name: 'Peau Ã©clatante', icon: 'âœ¨', days: 21, color: 'bg-pink-100 text-pink-800', description: 'Ta peau retrouve son Ã©clat' },
  
  // Premiers mois
  { id: 'alcohol_month_1', name: 'Foie en rÃ©cupÃ©ration', icon: 'ğŸ«€', days: 30, color: 'bg-red-100 text-red-800', description: 'Ton foie commence Ã  guÃ©rir' },
  { id: 'alcohol_6_weeks', name: 'Ã‰nergie retrouvÃ©e', icon: 'âš¡', days: 42, color: 'bg-yellow-100 text-yellow-800', description: 'Ton Ã©nergie est dÃ©cuplÃ©e' },
  { id: 'alcohol_2_months', name: 'MÃ©moire amÃ©liorÃ©e', icon: 'ğŸ§ ', days: 60, color: 'bg-purple-100 text-purple-800', description: 'Ta mÃ©moire s\'aiguise' },
  { id: 'alcohol_3_months', name: 'SystÃ¨me immunitaire', icon: 'ğŸ›¡ï¸', days: 90, color: 'bg-cyan-100 text-cyan-800', description: 'Tes dÃ©fenses se renforcent' },
  { id: 'alcohol_4_months', name: 'Pression artÃ©rielle', icon: 'â¤ï¸', days: 120, color: 'bg-rose-100 text-rose-800', description: 'Ta tension se normalise' },
  
  // Transformations majeures
  { id: 'alcohol_6_months', name: 'Nouvelle personne', icon: 'ğŸ¦‹', days: 180, color: 'bg-gradient-to-r from-purple-400 to-pink-400 text-white', description: 'Transformation complÃ¨te' },
  { id: 'alcohol_9_months', name: 'MaÃ®tre de soi', icon: 'ğŸ§˜', days: 270, color: 'bg-gradient-to-r from-green-400 to-blue-400 text-white', description: 'ContrÃ´le total de tes Ã©motions' },
  { id: 'alcohol_year_1', name: 'LÃ©gende', icon: 'ğŸ‘‘', days: 365, color: 'bg-gradient-to-r from-yellow-400 to-orange-400 text-white', description: 'Une annÃ©e de victoire totale' },
  { id: 'alcohol_18_months', name: 'Inspiration', icon: 'ğŸŒŸ', days: 547, color: 'bg-gradient-to-r from-indigo-400 to-purple-400 text-white', description: 'Tu inspires les autres' },
  { id: 'alcohol_2_years', name: 'Invincible', icon: 'ğŸ’', days: 730, color: 'bg-gradient-to-r from-gray-700 to-gray-900 text-white', description: 'Rien ne peut t\'arrÃªter' },
  
  // Jalons spÃ©ciaux
  { id: 'alcohol_100_days', name: 'Centurion', icon: 'ğŸ’¯', days: 100, color: 'bg-gradient-to-r from-red-400 to-pink-400 text-white', description: '100 jours de pure dÃ©termination' },
  { id: 'alcohol_200_days', name: 'Gladiateur', icon: 'âš”ï¸', days: 200, color: 'bg-gradient-to-r from-orange-400 to-red-400 text-white', description: 'Guerrier de la sobriÃ©tÃ©' },
  { id: 'alcohol_500_days', name: 'Titan', icon: 'ğŸ›ï¸', days: 500, color: 'bg-gradient-to-r from-blue-600 to-purple-600 text-white', description: 'Force titanesque' },
  { id: 'alcohol_1000_days', name: 'Immortel', icon: 'ğŸ”¥', days: 1000, color: 'bg-gradient-to-r from-purple-600 to-pink-600 text-white', description: 'LÃ©gende immortelle' }
];

export const cigaretteBadges = [
  // Premiers pas
  { id: 'cigarette_first_day', name: 'Premier souffle', icon: 'ğŸŒ¬ï¸', days: 1, color: 'bg-sky-100 text-sky-800', description: 'Ton premier souffle de libertÃ©' },
  { id: 'cigarette_3_days', name: 'Nicotine Ã©liminÃ©e', icon: 'ğŸš«', days: 3, color: 'bg-red-100 text-red-800', description: 'La nicotine quitte ton corps' },
  { id: 'cigarette_week_1', name: 'GoÃ»t retrouvÃ©', icon: 'ğŸ‘…', days: 7, color: 'bg-orange-100 text-orange-800', description: 'Tes papilles se rÃ©veillent' },
  { id: 'cigarette_2_weeks', name: 'Circulation amÃ©liorÃ©e', icon: 'ğŸ©¸', days: 14, color: 'bg-red-100 text-red-800', description: 'Ton sang circule mieux' },
  { id: 'cigarette_3_weeks', name: 'Odorat affinÃ©', icon: 'ğŸ‘ƒ', days: 21, color: 'bg-green-100 text-green-800', description: 'Tu redÃ©couvres les odeurs' },
  
  // Premiers mois
  { id: 'cigarette_month_1', name: 'Poumons en guÃ©rison', icon: 'ğŸ«', days: 30, color: 'bg-blue-100 text-blue-800', description: 'Tes poumons commencent Ã  guÃ©rir' },
  { id: 'cigarette_6_weeks', name: 'Endurance boostÃ©e', icon: 'ğŸƒ', days: 42, color: 'bg-green-100 text-green-800', description: 'Tu cours sans t\'essouffler' },
  { id: 'cigarette_2_months', name: 'Toux disparue', icon: 'ğŸ¤', days: 60, color: 'bg-emerald-100 text-emerald-800', description: 'Fini la toux du fumeur' },
  { id: 'cigarette_3_months', name: 'CapacitÃ© pulmonaire', icon: 'ğŸ’¨', days: 90, color: 'bg-cyan-100 text-cyan-800', description: 'Tes poumons retrouvent leur force' },
  { id: 'cigarette_6_months', name: 'Risque cardiaque rÃ©duit', icon: 'ğŸ’—', days: 180, color: 'bg-pink-100 text-pink-800', description: 'Ton cÅ“ur te remercie' },
  
  // Transformations majeures
  { id: 'cigarette_year_1', name: 'Poumons neufs', icon: 'ğŸŒªï¸', days: 365, color: 'bg-gradient-to-r from-blue-400 to-cyan-400 text-white', description: 'Tes poumons sont comme neufs' },
  { id: 'cigarette_18_months', name: 'Souffle de dragon', icon: 'ğŸ‰', days: 547, color: 'bg-gradient-to-r from-red-400 to-orange-400 text-white', description: 'Souffle puissant et pur' },
  { id: 'cigarette_2_years', name: 'MaÃ®tre du souffle', icon: 'ğŸŒŠ', days: 730, color: 'bg-gradient-to-r from-teal-400 to-blue-400 text-white', description: 'Respiration parfaite' },
  { id: 'cigarette_5_years', name: 'Risque zÃ©ro', icon: 'ğŸ›¡ï¸', days: 1825, color: 'bg-gradient-to-r from-green-500 to-emerald-500 text-white', description: 'Risque de cancer divisÃ© par 2' },
  
  // Jalons spÃ©ciaux
  { id: 'cigarette_100_days', name: 'Air pur', icon: 'ğŸŒ¿', days: 100, color: 'bg-gradient-to-r from-green-400 to-teal-400 text-white', description: '100 jours d\'air pur' },
  { id: 'cigarette_200_days', name: 'Guerrier du souffle', icon: 'âš¡', days: 200, color: 'bg-gradient-to-r from-yellow-400 to-orange-400 text-white', description: 'Champion de la respiration' },
  { id: 'cigarette_500_days', name: 'TempÃªte', icon: 'ğŸŒªï¸', days: 500, color: 'bg-gradient-to-r from-gray-400 to-blue-400 text-white', description: 'Force de la nature' },
  { id: 'cigarette_1000_days', name: 'Ã‰ternel', icon: 'â™¾ï¸', days: 1000, color: 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white', description: 'Souffle Ã©ternel' }
];

export const badges = [...alcoholBadges, ...cigaretteBadges];

export const getUnlockedBadges = (currentStreaks, addictions) => {
  const unlockedBadges = [];
  
  // VÃ©rification de sÃ©curitÃ©
  if (!addictions || !Array.isArray(addictions) || !currentStreaks) {
    return unlockedBadges;
  }
  
  addictions.forEach(addiction => {
    const streak = currentStreaks[addiction] || 0;
    const relevantBadges = addiction === 'alcohol' ? alcoholBadges : cigaretteBadges;
    const unlocked = relevantBadges.filter(badge => streak >= badge.days);
    unlockedBadges.push(...unlocked);
  });
  
  return unlockedBadges.sort((a, b) => a.days - b.days);
};

export const getNextBadge = (currentStreaks, addictions) => {
  const nextBadges = [];
  
  // VÃ©rification de sÃ©curitÃ©
  if (!addictions || !Array.isArray(addictions) || !currentStreaks) {
    return null;
  }
  
  addictions.forEach(addiction => {
    const streak = currentStreaks[addiction] || 0;
    const relevantBadges = addiction === 'alcohol' ? alcoholBadges : cigaretteBadges;
    const next = relevantBadges.find(badge => streak < badge.days);
    if (next) {
      nextBadges.push({ ...next, addiction });
    }
  });
  
  return nextBadges.sort((a, b) => a.days - b.days)[0];
};

export const getNewlyUnlockedBadges = (oldStreaks, newStreaks, addictions) => {
  const newBadges = [];
  
  // VÃ©rification de sÃ©curitÃ©
  if (!addictions || !Array.isArray(addictions) || !oldStreaks || !newStreaks) {
    return newBadges;
  }
  
  addictions.forEach(addiction => {
    const oldStreak = oldStreaks[addiction] || 0;
    const newStreak = newStreaks[addiction] || 0;
    
    if (newStreak > oldStreak) {
      const relevantBadges = addiction === 'alcohol' ? alcoholBadges : cigaretteBadges;
      const newlyUnlocked = relevantBadges.filter(badge => 
        newStreak >= badge.days && oldStreak < badge.days
      );
      newBadges.push(...newlyUnlocked.map(badge => ({ ...badge, addiction })));
    }
  });
  
  return newBadges;
};